// require https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/p5.js
// require https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.3/addons/p5.dom.js

const jfk =
  "The energy, the faith, the devotion which we bring to this endeavor will light our country and all who serve it--and the glow from that fire can truly light the world. and so, my fellow Americans: ask not what your country can do for you--ask what you can do for your country. My fellow citizens of the world: ask not what America will do for you, but what together we can do for the freedom of man. Finally, whether you are citizens of America or citizens of the world, ask of us here the same high standards of strength and sacrifice which we ask of you.";
const cardi =
  "I be in and out them banks so much, I know they're tired of me. Honestly, don't give a fuck 'bout who ain't fond of me. Ain't no more beefing, I'm just keeping to myself. I like stunting, I like shining. I like million dollar deals. Where's my pen, b*tch I'm signin'. I'm a boss in a skirt. Write a verse while I twerk. Prolly make the preacher sweat. Now I'm a boss, I write my own name on the checks. Leave his texts on read. Is she a stripper, a rapper or a singer? Ride through your hood like B*tch, Im the mayor!";
const lovecraft =
  "What I heard in my youth about the shunned house was merely that people died there in alarmingly great numbers. That, I was told, was why the original owners had moved out some twenty years after building the place. It was plainly unhealthy, perhaps because of the dampness and fungous growths in the cellar, the general sickish smell, the drafts of the hallways, or the quality of the well and pump water. These things were bad enough, and these were all that gained belief among the persons whom I knew. Only the notebooks of my antiquarian uncle, Doctor Elihu Whipple, revealed to me at length the darker, vaguer surmises which formed an undercurrent of folklore among old-time servants and humble folk; surmises which never travelled far, and which were largely forgotten when Providence grew to be a metropolis with a shifting modern population. The general fact is, that the house was never regarded by the solid part of the community as in any real sense 'haunted.' There were no widespread tales of rattling chains, cold currents of air, extinguished lights, or faces at the window. Extremists sometimes said the house was 'unlucky,' but that is as far as even they went. What was really beyond dispute is that a frightful proportion of persons died there; or more accurately, had died there, since after some peculiar happenings over sixty years ago the building had become deserted through the sheer impossibility of renting it. These persons were not all cut off suddenly by any one cause; rather did it seem that their vitality was insidiously sapped, so that each one died the sooner from whatever tendency to weakness he may have naturally had. And those who did not die displayed in constying degree a type of anemia or consumption, and sometimes a decline of the mental faculties, which spoke ill for the salubriousness of the building. Neighboring houses, it must be added, seemed entirely free from the noxious quality. This much I knew before my insistent questioning led my uncle to show me the notes which finally embarked us both on our hideous investigation. In my childhood the shunned house was vacant, with barren, gnarled and terrible old trees, long, queerly pale grass and nightmarishly misshapen weeds in the high terraced yard where birds never lingered. We boys used to overrun the place, and I can still recall my youthful terror not only at the morbid strangeness of this sinister vegetation, but at the eldritch atmosphere and odor of the dilapidated house, whose unlocked front door was often entered in quest of shudders. The small-paned windows were largely broken, and a nameless air of desolation hung round the precarious panelling, shaky interior shutters, peeling wall-paper, falling plaster, rickety staircases, and such fragments of battered furniture as still remained. The dust and cobwebs added their touch of the fearful; and brave indeed was the boy who would voluntarily ascend the ladder to the attic, a vast raftered length lighted only by small blinking windows in the gable ends, and filled with a massed wreckage of chests, chairs, and spinning-wheels which infinite years of deposit had shrouded and festooned into monstrous and hellish shapes. But after all, the attic was not the most terrible part of the house. It was the dank, humid cellar which somehow exerted the strongest repulsion on us, even though it was wholly above ground on the street side, with only a thin door and window-pierced brick wall to separate it from the busy sidewalk. We scarcely knew whether to haunt it in spectral fascination, or to shun it for the sake of our souls and our sanity. For one thing, the bad odor of the house was strongest there; and for another thing, we did not like the white fungous growths which occasionally sprang up in rainy summer weather from the hard earth floor. Those fungi, grotesquely like the vegetation in the yard outside, were truly horrible in their outlines; detestable parodies of toadstools and Indian-pipes, whose like we had never seen in any other situation. They rotted quickly, and at one stage became slightly phosphorescent; so that nocturnal passers-by sometimes spoke of witch-fires glowing behind the broken panes of the fetor-spreading windows. We never—even in our wildest Halloween moods—visited this cellar by night, but in some of our daytime visits could detect the phosphorescence, especially when the day was dark and wet. There was also a subtler thing we often thought we detected—a very strange thing which was, however, merely suggestive at most. I refer to a sort of cloudy whitish pattern on the dirt floor—a vague, shifting deposit of mold or niter which we sometimes thought we could trace amidst the sparse fungous growths near the huge fireplace of the basement kitchen. Once in a while it struck us that this patch bore an uncanny resemblance to a doubled-up human figure, though generally no such kinship existed, and often there was no whitish deposit whatever. On a certain rainy afternoon when this illusion seemed phenomenally strong, and when, in addition, I had fancied I glimpsed a kind of thin, yellowish, shimmering exhalation rising from the nitrous pattern toward the yawning fireplace, I spoke to my uncle about the matter. He smiled at this odd conceit, but it seemed that his smile was tinged with reminiscence. Later I heard that a similar notion entered into some of the wild ancient tales of the common folk—a notion likewise alluding to ghoulish, wolfish shapes taken by smoke from the great chimney, and queer contours assumed by certain of the sinuous tree-roots that thrust their way into the cellar through the loose foundation-stones.";
const the_raven =
  "Once upon a midnight dreary, while I pondered, weak and weary, Over many a quaint and curious volume of forgotten lore— While I nodded, nearly napping, suddenly there came a tapping, As of some one gently rapping, rapping at my chamber door. '’Tis some visitor,' I muttered, 'tapping at my chamber door— Only this and nothing more.' Ah, distinctly I remember it was in the bleak December; And each separate dying ember wrought its ghost upon the floor. Eagerly I wished the morrow;—vainly I had sought to borrow From my books surcease of sorrow—sorrow for the lost Lenore— For the rare and radiant maiden whom the angels name Lenore— Nameless here for evermore. And the silken, sad, uncertain rustling of each purple curtain Thrilled me—filled me with fantastic terrors never felt before; So that now, to still the beating of my heart, I stood repeating '’Tis some visitor entreating entrance at my chamber door— Some late visitor entreating entrance at my chamber door;— This it is and nothing more.' Presently my soul grew stronger; hesitating then no longer, 'Sir,' said I, 'or Madam, truly your forgiveness I implore; But the fact is I was napping, and so gently you came rapping, And so faintly you came tapping, tapping at my chamber door, That I scarce was sure I heard you'—here I opened wide the door;— Darkness there and nothing more. Deep into that darkness peering, long I stood there wondering, fearing, Doubting, dreaming dreams no mortal ever dared to dream before; But the silence was unbroken, and the stillness gave no token, And the only word there spoken was the whispered word, 'Lenore?' This I whispered, and an echo murmured back the word, 'Lenore!'— Merely this and nothing more. Back into the chamber turning, all my soul within me burning, Soon again I heard a tapping somewhat louder than before. 'Surely,' said I, 'surely that is something at my window lattice;  Let me see, then, what thereat is, and this mystery explore— Let my heart be still a moment and this mystery explore;— ’Tis the wind and nothing more!' Open here I flung the shutter, when, with many a flirt and flutter, In there stepped a stately Raven of the saintly days of yore; Not the least obeisance made he; not a minute stopped or stayed he; But, with mien of lord or lady, perched above my chamber door— Perched upon a bust of Pallas just above my chamber door— Perched, and sat, and nothing more.  Then this ebony bird beguiling my sad fancy into smiling, By the grave and stern decorum of the countenance it wore, 'Though thy crest be shorn and shaven, thou,' I said, 'art sure no craven, Ghastly grim and ancient Raven wandering from the Nightly shore— Tell me what thy lordly name is on the Night’s Plutonian shore!' Quoth the Raven 'Nevermore.' Much I marvelled this ungainly fowl to hear discourse so plainly, Though its answer little meaning—little relevancy bore; For we cannot help agreeing that no living human being Ever yet was blessed with seeing bird above his chamber door— Bird or beast upon the sculptured bust above his chamber door, With such name as 'Nevermore.' But the Raven, sitting lonely on the placid bust, spoke only That one word, as if his soul in that one word he did outpour. Nothing farther then he uttered—not a feather then he fluttered— Till I scarcely more than muttered 'Other friends have flown before— On the morrow he will leave me, as my Hopes have flown before.' Then the bird said 'Nevermore.' Startled at the stillness broken by reply so aptly spoken, 'Doubtless,' said I, 'what it utters is its only stock and store Caught from some unhappy master whom unmerciful Disaster Followed fast and followed faster till his songs one burden bore— Till the dirges of his Hope that melancholy burden bore Of ‘Never—nevermore’.' But the Raven still beguiling all my fancy into smiling, Straight I wheeled a cushioned seat in front of bird, and bust and door; Then, upon the velvet sinking, I betook myself to linking Fancy unto fancy, thinking what this ominous bird of yore— What this grim, ungainly, ghastly, gaunt, and ominous bird of yore Meant in croaking 'Nevermore.' This I sat engaged in guessing, but no syllable expressing To the fowl whose fiery eyes now burned into my bosom’s core; This and more I sat divining, with my head at ease reclining On the cushion’s velvet lining that the lamp-light gloated o’er, But whose velvet-violet lining with the lamp-light gloating o’er, She shall press, ah, nevermore! Then, methought, the air grew denser, perfumed from an unseen censer Swung by Seraphim whose foot-falls tinkled on the tufted floor. 'Wretch,' I cried, 'thy God hath lent thee—by these angels he hath sent thee Respite—respite and nepenthe from thy memories of Lenore; Quaff, oh quaff this kind nepenthe and forget this lost Lenore!' Quoth the Raven 'Nevermore.' 'Prophet!' said I, 'thing of evil!—prophet still, if bird or devil!— Whether Tempter sent, or whether tempest tossed thee here ashore, Desolate yet all undaunted, on this desert land enchanted— On this home by Horror haunted—tell me truly, I implore— Is there—is there balm in Gilead?—tell me—tell me, I implore!' Quoth the Raven 'Nevermore.' 'Prophet!' said I, 'thing of evil!—prophet still, if bird or devil! By that Heaven that bends above us—by that God we both adore— Tell this soul with sorrow laden if, within the distant Aidenn, It shall clasp a sainted maiden whom the angels name Lenore— Clasp a rare and radiant maiden whom the angels name Lenore.' Quoth the Raven 'Nevermore.' 'Be that word our sign of parting, bird or fiend!' I shrieked, upstarting— 'Get thee back into the tempest and the Night’s Plutonian shore! Leave no black plume as a token of that lie thy soul hath spoken! Leave my loneliness unbroken!—quit the bust above my door! Take thy beak from out my heart, and take thy form from off my door!' Quoth the Raven 'Nevermore.' And the Raven, never flitting, still is sitting, still is sitting On the pallid bust of Pallas just above my chamber door; And his eyes have all the seeming of a demon’s that is dreaming, And the lamp-light o’er him streaming throws his shadow on the floor; And my soul from out that shadow that lies floating on the floor Shall be lifted—nevermore!";
const seuss =
  "One fish Two fish Red fish Blue fish. Black fish Blue fish Old fish New fish. This one has a little star. This one has a little car. Say! What a lot Of fish there are. Yes. Some are red. And some are blue. Some are old. And some are new. Some are sad. And some are glad. And some are very, very bad. Why are they Sad and glad and bad? I do not know. Go ask your dad. Some are thin. And some are fat. The fat one has A yellow hat. From there to here, from here to there, Funny things Are everywhere.  Here are some Who like to run. They run for fun In the hot, hot sun. Oh me! Oh my! Oh me! Oh my! What a lot Of funny things go by. Some have two feet And some have four. Some have six feet And some have more. Where do they come from? I can’t say. But I bet they have come a long, long way. We see them come. We see them go. Some are fast. And some are slow. Some are high And some are low. Not one of them Is like another. Don’t ask us why. Go ask your mother. Say! Look at his fingers! One, two, three… How many fingers Do I see? One, two, three, four, Five, six, seven, Eight, nine, ten. He has eleven! Eleven! This is something new. I wish I had Eleven, too! ";

const model = generateModel(jfk + " " + cardi);
const output_text = generateText("ask", model);

document.body.innerHTML = output_text;
// console.log(output_text);

function generateModel(input_text) {
  const words = input_text.split(" ");
  const model = {};

  // loop through all the words except the last one.
  for (let i = 0; i < words.length - 1; i++) {
    const target_word = words[i];
    const next_word = words[i + 1];

    // if the model doesn't contain the target word, add it.
    if (!model[target_word]) {
      model[target_word] = [];
    }

    // add the next word to the possibilities for target_word
    model[target_word].push(next_word);
  }

  return model;
}

function generateText(first_word, model) {
  // start with the word passed in
  let output_text = first_word;
  let current_word = first_word;
  for (let i = 0; i < 120; i++) {
    // choose the next word by sampling from options in the model
    current_word = sample(model[current_word]);

    // append word to output
    output_text += " ";
    output_text += current_word;

    // if we get to a word that ends with "." we are done.
    const last_character = current_word.substr(current_word.length - 1);
    if (last_character === ".") {
      break;
    }
  }
  return output_text;
}

function sample(array) {
  console.log(array);
  const index = Math.floor(Math.random() * array.length);
  return array[index];
}
